<section class="py-16 max-w-4xl mx-auto px-4">
  <!-- Header -->
  <div class="mb-12">
    <h1 class="text-4xl font-extrabold mb-2">Mes Exp√©riences</h1>
    <p class="text-gray-600 dark:text-gray-400">
      {{ svc.items().length }} exp√©rience(s) professionnelle(s)
    </p>
  </div>

  <!-- Timeline -->
  <ol class="relative border-l-2 border-purple-400 dark:border-purple-600 pl-8">
    @for (exp of svc.items(); track exp.id; let isLast = $last) {
      <li class="mb-10" [class.!mb-0]="isLast">
        <!-- Timeline dot -->
        <div class="absolute -left-4 mt-1.5 h-6 w-6 rounded-full bg-white dark:bg-gray-900 border-2 border-purple-400 dark:border-purple-600 flex items-center justify-center">
          <div class="h-2.5 w-2.5 rounded-full bg-gradient-to-r from-purple-500 to-pink-500"></div>
        </div>

        <!-- Card -->
        <div class="rounded-2xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg hover:border-purple-500 transition bg-white dark:bg-gray-800">
          
          <!-- Header -->
          <div class="mb-4">
            <div class="flex items-start justify-between gap-4 mb-2">
              <div>
                <h3 class="text-2xl font-extrabold text-purple-600 dark:text-purple-400">
                  {{ exp.company }}
                </h3>
                <p class="text-lg font-semibold text-gray-900 dark:text-white mt-1">
                  {{ exp.role }}
                </p>
              </div>
            </div>
            
            <!-- Duration & Location -->
            <div class="flex items-center gap-4 text-sm text-gray-600 dark:text-gray-400">
              <span class="flex items-center gap-1">üìÖ {{ exp.duration }}</span>
              @if (exp.location) {
                <span class="flex items-center gap-1">üìç {{ exp.location }}</span>
              }
            </div>
          </div>

          <!-- Description courte -->
          <p class="text-gray-700 dark:text-gray-300 mb-4">
            {{ exp.description }}
          </p>

          <!-- Toggle button -->
          <button
            type="button"
            (click)="toggleExpanded(exp.id)"
            class="text-sm text-purple-600 dark:text-purple-400 font-semibold hover:underline mb-4"
          >
            {{ expandedId === exp.id ? '‚ñº Masquer d√©tails' : '‚ñ∂ Voir d√©tails complets' }}
          </button>

          <!-- D√©tails expandibles -->
          @if (expandedId === exp.id) {
            <div class="mb-6 pb-6 border-t border-gray-200 dark:border-gray-700">
              <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">Responsabilit√©s & R√©alisations :</h4>
              <ul class="space-y-2">
                @for (detail of exp.details; track detail) {
                  <li class="flex items-start gap-3 text-sm text-gray-700 dark:text-gray-300">
                    <span class="text-purple-500 mt-1 flex-shrink-0">‚Ä¢</span>
                    <span>{{ detail }}</span>
                  </li>
                }
              </ul>
            </div>

            <!-- Achievements -->
            @if (exp.achievements && exp.achievements.length > 0) {
              <div class="mb-6 pb-6 border-t border-gray-200 dark:border-gray-700">
                <h4 class="text-sm font-semibold text-gray-900 dark:text-white mb-3">Accomplissements cl√©s :</h4>
                <ul class="space-y-2">
                  @for (achievement of exp.achievements; track achievement) {
                    <li class="flex items-start gap-3 text-sm text-gray-700 dark:text-gray-300">
                      <span class="text-green-500 mt-1 flex-shrink-0">‚úì</span>
                      <span>{{ achievement }}</span>
                    </li>
                  }
                </ul>
              </div>
            }
          }

          <!-- Technologies -->
          <div class="pt-4 border-t border-gray-200 dark:border-gray-700">
            <p class="text-xs font-semibold text-gray-600 dark:text-gray-400 mb-3">Technologies</p>
            <div class="flex flex-wrap gap-2">
              @for (t of exp.tech; track t) {
                <span class="text-xs px-3 py-1 rounded-full bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 font-medium">
                  {{ t }}
                </span>
              }
            </div>
          </div>

        </div>
      </li>
    }
  </ol>
</section>
